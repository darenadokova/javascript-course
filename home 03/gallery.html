<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Gallery Home 03</title>
    <style>
        ul#gallery {
            list-style: none;
        }
    
        ul#gallery li+li { /* Непосредствено следващият li след него */
            display: none;
        }
        
        .buttons {
            margin-left: 130px;
        }
        </style>
    </head>
    <ul id="gallery">
        <li><img src="pics-large/pic1-320x240.jpg"></li>
        <li><img src="pics-large/pic2-320x240.jpg"></li>
        <li><img src="pics-large/pic3-320x240.jpg"></li>
        <li><img src="pics-large/pic4-320x240.jpg"></li>
        <li><img src="pics-large/pic5-320x240.jpg"></li>
    </ul>

    <div class="buttons">
        <input type="button" id="prv" value="<<">
        <button id="slide">Auto</button>
        <input type="button" id="nxt" value=">>">
    </div>
<!-- Неблокирещо включване -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script> 
// Локален JS
  $(document).ready(function(){
    var intervalId = 0,
        size = $('#gallery li').length;
        next = 1,
        buttonLabel = 'Stop';

    $('#nxt').click(function (){
        next++;
        showNextImage('after');
        
        if (next >= size) {
            hideNext();
        } else {
            showPrev();
        }
    }); //on click button next 

    $('#slide').click(function (){
        if (intervalId > 0){
            clearInterval(intervalId);
            intervalId = 0; // зачистваме стойносста
            buttonLabel = 'Auto';
        } else {
            intervalId = setInterval(showNextImage, 2000);
            buttonLabel = 'Stop';
        }
        $(this).html(buttonLabel); //когато използваме button
        //console.log('interval id:', intervalId);
    }); //on click button auto


    $('#prv').click(function (){
        next--;
        showNextImage('before');

        if (next <= 1) {
           hidePrev();
        } else {
            showNext();
        }
    }); //on click button previous 

});
// Коментар document ready

function showNextImage(where){

if (where === 'after') {
    $('#gallery li:first-child').appendTo($('#gallery'));
} else if (where === 'before') {
    $('#gallery li:last-child').prependTo($('#gallery'));
}
}

function hideNext(){
    $('#nxt').css('visibility', 'hidden');
}

function hidePrev(){
    $('#prv').css('visibility', 'hidden');
}

function showNext(){
    $('#nxt').css('visibility', 'visible');
}

function showPrev(){
    $('#prv').css('visibility', 'visible');
}
        </script> 
</body>
</html>